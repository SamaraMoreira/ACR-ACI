# AiHackLogistics

Nossa solução não só aprimora a experiência dos pacientes, mas também melhora a eficiência e a eficácia do sistema de saúde como um todo, trazendo benefícios para hospitais e profissionais. Permitimos que pacientes agendem consultas de forma rápida e simplificada, diretamente pelo smartphone, desde que possuam cadastro prévio no hospital. Em casos de consultas realizadas, integramos um recurso avançado de prognóstico utilizando IA. Nosso modelo atual foi treinado para detectar sinais de COVID-19 e pneumonia. O exame é conduzido por um profissional de saúde designado pelo hospital, que captura imagens do pulmão do paciente. Essas imagens são analisadas automaticamente pelo nosso modelo, que identifica possíveis indícios de doenças respiratórias, permitindo aos médicos priorizar os casos mais graves e agilizar o tratamento.

### Apresentação em vídeo
[Vídeo](https://www.youtube.com/watch?v=5LJzuXLxDIE)

## Comandos

### Criar o grupo de recursos

Este comando cria um novo grupo de recursos no Azure para organizar e gerenciar os recursos necessários para a aplicação.

```bash
az group create --name rg-cp2 --location brazilsouth
```
## Criando o ACR

```bash
az acr create --resource-group rg-cp2 --name acr552302 --sku Basic
```

### Autenticar-se no registro de contêineres do Azure

Este comando autentica seu ambiente Docker com o Azure Container Registry (ACR).

```bash
az acr login --name acr552302
```

### Construir a imagem Docker

Construa a imagem Docker para a aplicação localmente.

```bash
docker build -t cp-2 .
```

### Rodar a aplicação localmente

Execute a aplicação localmente usando Docker.

```bash
docker run --name cp-2 -d -p 8080:8080 cp-2
```

### Marcar a imagem para o ACR

Marque a imagem localmente com o nome do repositório no ACR para que possa ser enviada.

```bash
docker tag cp-2 acr552302.azurecr.io/cp2:v1
```

### Enviar a imagem para o ACR

Envie a imagem Docker para o Azure Container Registry.

```bash
docker push acr552302.azurecr.io/cp2:v1
```

### Autenticar-se novamente no ACR

Se necessário, você pode se autenticar novamente no ACR utilizando o nome de usuário e senha.

```bash
az acr login --name acr552302 --username acr552302 --password aA1sCgOcl0ENJiOPVZAVTsedHqafQwkG8IB2MZMDat+ACRApuVwr
```

### Criar um contêiner no Azure Container Instances (ACI)

Crie um contêiner a partir da imagem armazenada no ACR no Azure Container Instances (ACI) e disponibilize-o publicamente.

```bash
az container create --resource-group rg-cp2 --name acr552302 --image acr552302.azurecr.io/cp2:v1 --cpu 1 --memory 1 --registry-login-server acr552302.azurecr.io --registry-username acr552302 --registry-password aA1sCgOcl0ENJiOPVZAVTsedHqafQwkG8IB2MZMDat+ACRApuVwr --ip-address Public --dns-name-label acr552302 --ports 3000 80 8080
```

## Scripts SQL

Realize a criação das tabelas. Os inserts serão feitos através da versão web.

### Comandos DDL

```sql
-- Apagar a tabela de consultas
DROP TABLE tb_consultas;

-- Apagar a tabela de médicos
DROP TABLE tb_medicos;

-- Apagar a tabela de pacientes
DROP TABLE tb_paciente;

-- Apagar a tabela de endereços
DROP TABLE tb_endereco;

-- Criação da tabela de endereços 
CREATE TABLE tb_endereco (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    bairro VARCHAR2(255),
    cep VARCHAR2(255),
    cidade VARCHAR2(255),
    complemento VARCHAR2(255),
    estado VARCHAR2(255),
    numero VARCHAR2(255),
    rua VARCHAR2(255)
);

-- Criação da tabela de médicos 
CREATE TABLE tb_medicos (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    crm VARCHAR2(255),
    especialidade NUMBER(1),
    nome VARCHAR2(255),
    telefone VARCHAR2(255),
    endereco_id NUMBER
);

-- Criação da tabela de pacientes 
CREATE TABLE tb_paciente (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    data_nascimento DATE,
    nome VARCHAR2(255),
    telefone VARCHAR2(255),
    endereco_id NUMBER
);

-- Criação da tabela de consultas
CREATE TABLE tb_consultas (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    data_hora TIMESTAMP,
    observacoes VARCHAR2(255),
    prescricao VARCHAR2(255),
    status NUMBER(1),
    medico_id NUMBER,
    paciente_id NUMBER
);

```


### Comandos de Alteração (para adicionar constraints):

```sql
ALTER TABLE tb_consultas 
    ADD CONSTRAINT FK_Consultas_Medico 
    FOREIGN KEY (medico_id) 
    REFERENCES tb_medicos (id);

ALTER TABLE tb_consultas 
    ADD CONSTRAINT FK_Consultas_Paciente 
    FOREIGN KEY (paciente_id) 
    REFERENCES tb_paciente (id);

ALTER TABLE tb_medicos 
    ADD CONSTRAINT FK_Medicos_Endereco 
    FOREIGN KEY (endereco_id) 
    REFERENCES tb_endereco (id);

ALTER TABLE tb_paciente 
    ADD CONSTRAINT FK_Pacientes_Endereco 
    FOREIGN KEY (endereco_id) 
    REFERENCES tb_endereco (id);
```

